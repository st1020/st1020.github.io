<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Arch Linux 安装记录 - 石头的杂货铺</title><meta name="Description" content="St1020的博客"><meta property="og:title" content="Arch Linux 安装记录" />
<meta property="og:description" content="前几天打开好久没用的电脑，一更新把之前图省事装的 Manjaro 滚挂了，也懒得去解决，于是决定安装一个 Arch Linux ，在这里记录一下安装过程。
本人是非常喜欢 Arch Linux 的，因为其高度自定义化、遵循KISS原则（Keep It Simple, Stupid）、滚动更新并且以用户为中心。但是，由于其理念为以用户为中心但不是用户友好，所以对很多人来说安装 Arch 还是有一定难度的。读者也可以参考本篇教程从零开始安装一个属于自己的 Arch 。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://st1020.top/arch-install/" />
<meta property="og:image" content="https://st1020.top/logo.png"/>
<meta property="article:published_time" content="2020-04-08T11:22:14+08:00" />
<meta property="article:modified_time" content="2020-04-08T11:22:14+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://st1020.top/logo.png"/>

<meta name="twitter:title" content="Arch Linux 安装记录"/>
<meta name="twitter:description" content="前几天打开好久没用的电脑，一更新把之前图省事装的 Manjaro 滚挂了，也懒得去解决，于是决定安装一个 Arch Linux ，在这里记录一下安装过程。
本人是非常喜欢 Arch Linux 的，因为其高度自定义化、遵循KISS原则（Keep It Simple, Stupid）、滚动更新并且以用户为中心。但是，由于其理念为以用户为中心但不是用户友好，所以对很多人来说安装 Arch 还是有一定难度的。读者也可以参考本篇教程从零开始安装一个属于自己的 Arch 。"/>
<meta name="application-name" content="石头的杂货铺">
<meta name="apple-mobile-web-app-title" content="石头的杂货铺"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://st1020.top/arch-install/" /><link rel="prev" href="https://st1020.top/hello-world/" /><link rel="next" href="https://st1020.top/hexo-next-theme-customization/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Arch Linux 安装记录",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/st1020.top\/arch-install\/"
        },"genre": "posts","keywords": "Linux, Arch","wordcount":  4749 ,
        "url": "https:\/\/st1020.top\/arch-install\/","datePublished": "2020-04-08T11:22:14+08:00","dateModified": "2020-04-08T11:22:14+08:00","publisher": {
            "@type": "Organization",
            "name": "st1020","logo": "https:\/\/st1020.top\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "st1020"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="fixed"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="石头的杂货铺"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/logo.svg"
        data-srcset="/logo.svg, /logo.svg 1.5x, /logo.svg 2x"
        data-sizes="auto"
        alt="/logo.svg"
        title="/logo.svg" />石头的杂货铺</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="石头的杂货铺"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/logo.svg"
        data-srcset="/logo.svg, /logo.svg 1.5x, /logo.svg 2x"
        data-sizes="auto"
        alt="/logo.svg"
        title="/logo.svg" />石头的杂货铺</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Arch Linux 安装记录</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://st1020.top/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>st1020</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/linux/"><i class="far fa-folder fa-fw"></i>Linux</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-04-08">2020-04-08</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 4749 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 10 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#准备">准备</a>
      <ul>
        <li><a href="#安装介质">安装介质</a></li>
        <li><a href="#磁盘分区">磁盘分区</a></li>
      </ul>
    </li>
    <li><a href="#开始安装">开始安装</a>
      <ul>
        <li><a href="#u盘启动">U盘启动</a></li>
        <li><a href="#检查引导方式">检查引导方式</a></li>
        <li><a href="#联网">联网</a></li>
        <li><a href="#更新系统时间">更新系统时间</a></li>
        <li><a href="#分区与格式化">分区与格式化</a>
          <ul>
            <li><a href="#分区">分区</a></li>
            <li><a href="#格式化">格式化</a></li>
            <li><a href="#挂载分区">挂载分区</a></li>
          </ul>
        </li>
        <li><a href="#更换镜像源">更换镜像源</a></li>
        <li><a href="#安装基本包">安装基本包</a></li>
      </ul>
    </li>
    <li><a href="#基础配置">基础配置</a>
      <ul>
        <li><a href="#fstab">Fstab</a></li>
        <li><a href="#chroot">Chroot</a></li>
        <li><a href="#配置时区">配置时区</a></li>
        <li><a href="#本地化">本地化</a></li>
        <li><a href="#设置主机名">设置主机名</a></li>
        <li><a href="#设置root密码">设置Root密码</a></li>
        <li><a href="#安装引导程序">安装引导程序</a>
          <ul>
            <li><a href="#识别其他系统">识别其他系统</a></li>
            <li><a href="#biosmbr">BIOS/MBR</a></li>
            <li><a href="#efigpt">EFI/GPT</a></li>
            <li><a href="#检查">检查</a></li>
          </ul>
        </li>
        <li><a href="#提前安装其他必要软件">提前安装其他必要软件</a></li>
        <li><a href="#重启进入系统">重启进入系统</a></li>
      </ul>
    </li>
    <li><a href="#安装后的配置">安装后的配置</a>
      <ul>
        <li><a href="#创建交换文件">创建交换文件</a></li>
        <li><a href="#新建用户">新建用户</a></li>
        <li><a href="#配置sudo">配置sudo</a></li>
        <li><a href="#安装图像界面">安装图像界面</a>
          <ul>
            <li><a href="#安装显卡驱动">安装显卡驱动</a></li>
            <li><a href="#安装xorg">安装Xorg</a></li>
            <li><a href="#安装桌面环境">安装桌面环境</a></li>
            <li><a href="#安装显示管理器">安装显示管理器</a></li>
            <li><a href="#重启进入图形化界面">重启进入图形化界面</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#开始使用">开始使用</a>
      <ul>
        <li><a href="#配置-pacman">配置 pacman</a></li>
        <li><a href="#使用-archlinuxcn">使用 ArchlinuxCN</a></li>
        <li><a href="#使用-aur">使用 AUR</a></li>
        <li><a href="#安装中文字体">安装中文字体</a></li>
        <li><a href="#安装中文输入法">安装中文输入法</a></li>
      </ul>
    </li>
    <li><a href="#软件推荐">软件推荐</a>
      <ul>
        <li><a href="#zsh">Zsh</a></li>
        <li><a href="#办公">办公</a></li>
        <li><a href="#互联网">互联网</a></li>
        <li><a href="#影音图像">影音图像</a></li>
        <li><a href="#文字编辑">文字编辑</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>前几天打开好久没用的电脑，一更新把之前图省事装的 Manjaro 滚挂了，也懒得去解决，于是决定安装一个 Arch Linux ，在这里记录一下安装过程。</p>
<p>本人是非常喜欢 Arch Linux 的，因为其高度自定义化、遵循KISS原则（Keep It Simple, Stupid）、滚动更新并且以用户为中心。但是，由于其理念为以用户为中心但不是用户友好，所以对很多人来说安装 Arch 还是有一定难度的。读者也可以参考本篇教程从零开始安装一个属于自己的 Arch 。</p>
<h2 id="准备">准备</h2>
<h3 id="安装介质">安装介质</h3>
<p>在安装之前我们需要首先准备一个U盘或者光盘作为安装介质。不过光盘这东西现在应该没人用了吧，那我就以U盘为例了。</p>
<ol>
<li>下载镜像：<a href="https://www.archlinux.org/download/" target="_blank" rel="noopener noreffer">Arch Linux Downloads</a>下载 Arch Linux 镜像。为了提高下载速度，我是在<a href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/" target="_blank" rel="noopener noreffer">TUNA</a>（清华大学开源软件镜像站）下载的。</li>
<li>烧录镜像：我是在 Windows 下使用 <a href="http://rufus.ie/" target="_blank" rel="noopener noreffer">Rufus</a> 烧录的镜像，当然，也可以使用其他软件。</li>
</ol>
<h3 id="磁盘分区">磁盘分区</h3>
<p>为了方便我直接在Windows下分好了分区，我的电脑有一块 SSD 和一块机械硬盘，我打算在SSD挂载<code>/</code>，在机械硬盘挂载<code>/home</code>。所以我分别在两块硬盘的末尾空余出了一段空间，留作Arch使用。</p>
<h2 id="开始安装">开始安装</h2>
<h3 id="u盘启动">U盘启动</h3>
<p>在 BIOS 或者 UEFI 中设置U盘为第一启动项，进入 Arch 菜单后选择<code>Boot Arch Linux (x86_64)</code>。</p>
<h3 id="检查引导方式">检查引导方式</h3>
<p>可以使用以下命令检查引导方式为 BIOS(LEGACY)+MBR 还是 EFI/GPT 。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ls /sys/firmware/efi/efivars
</code></pre></td></tr></table>
</div>
</div><p>我的电脑比较旧，仍使用的是 BIOS+MBR 。</p>
<h3 id="联网">联网</h3>
<p>Arch 是不能离线安装的，必须要连接网络。</p>
<ul>
<li>
<p>有线连接：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">dhcpcd
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>无线连接：</p>
<p>Arch 并不一定能在此时支持所有型号的无线网卡，如果支持的话可以使用以下命令连接 Wifi ：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wifi-menu
</code></pre></td></tr></table>
</div>
</div><p>如果出现问题的话可以参见：<a href="https://wiki.archlinux.org/index.php/Network_configuration/Wireless" target="_blank" rel="noopener noreffer">Network configuration/Wireless</a></p>
<p>如果你的无线网卡无法支持，可以使用数据线将手机连接电脑，启用USB网络共享，然后就可以按照有线连接处理了。</p>
</li>
</ul>
<h3 id="更新系统时间">更新系统时间</h3>
<p>执行以下命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">timedatectl set-ntp <span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="分区与格式化">分区与格式化</h3>
<div class="details admonition danger open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-skull-crossbones fa-fw"></i>危险<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><h4 id="注意">注意</h4>
<p>数据无价，请谨慎操作！</div>
        </div>
    </div>
<h4 id="分区">分区</h4>
<p>使用以下命令查看目前的分区情况。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">fdisk -l
</code></pre></td></tr></table>
</div>
</div><p>使用以下命令进入交互式分区管理：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">cfdisk /dev/sdx
</code></pre></td></tr></table>
</div>
</div><p>其中的<code>x</code>替换为你想要进行分区的硬盘，比如我就需要先执行<code>cfdisk /dev/sda</code>来处理 SSD ，然后再执行<code>cfdisk /dev/sdb</code>来处理机械硬盘。</p>
<p>分区的过程比较简单，按照界面中的提示来就好，最后不要忘了保存。</p>
<p>分区完成后再执行<code>fdisk -l</code>来确认一下分区信息。</p>
<h4 id="格式化">格式化</h4>
<p>使用以下命令对分区进行格式化：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mkfs.ext4 /dev/sdxY
</code></pre></td></tr></table>
</div>
</div><p>其中的 x y 替换为需要格式化的分区，比如<code>mkfs.ext4 /dev/sda1</code> 。</p>
<h4 id="挂载分区">挂载分区</h4>
<p>使用以下命令将根分区挂载到<code>/mnt</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mount /dev/sdxY /mnt
</code></pre></td></tr></table>
</div>
</div><p>如果你像我一样额外创建了<code>/home</code>分区，还需要执行以下操作：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mkdir /mnt/home
mounrt /dev/sdxY /mnt/home
</code></pre></td></tr></table>
</div>
</div><h3 id="更换镜像源">更换镜像源</h3>
<p>为了加快之后的软件包下载速度，我们需要先更换一下默认的镜像源。</p>
<p>编辑<code>/etc/pacman.d/mirrorlist</code> 。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">nano /etc/pacman.d/mirrorlist
</code></pre></td></tr></table>
</div>
</div><p>将你需要的镜像源剪切到文件的最上方，第一个镜像源将作为默认镜像源。</p>
<p>对于 nano 编辑器，你可以使用<code>Ctrl+W</code>快捷键来搜索，<code>Alt+W</code>来继续搜索下一个，<code>Ctrl+K</code>来剪切一整行，<code>Ctrl+U</code>粘贴，最后使用<code>Ctrl+X</code>来退出。</p>
<p>我推荐使用清华、浙大、中科大和网易的源。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
Server = http://mirrors.zju.edu.cn/archlinux/$repo/os/$arch
Server = http://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
Server = http://mirrors.163.com/archlinux/$repo/os/$arch
</code></pre></td></tr></table>
</div>
</div><h3 id="安装基本包">安装基本包</h3>
<p>执行以下命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pacstrap /mnt base base-devel linux linux-firmware dhcpcd
</code></pre></td></tr></table>
</div>
</div><p>其中<code>base-devel</code>如果你不使用 AUR 源的话可以不安装。</p>
<h2 id="基础配置">基础配置</h2>
<h3 id="fstab">Fstab</h3>
<p>使用以下命令生成 <a href="https://wiki.archlinux.org/index.php/Fstab" target="_blank" rel="noopener noreffer">fstab</a> 文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">genfstab -L /mnt &gt;&gt; /mnt/etc/fstab
</code></pre></td></tr></table>
</div>
</div><p>这步非常重要，决定了你能否正常启动系统，最好检查一下配置的是否正确。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">cat /mnt/etc/fstab
</code></pre></td></tr></table>
</div>
</div><h3 id="chroot">Chroot</h3>
<p><a href="https://wiki.archlinux.org/index.php/Change_root" target="_blank" rel="noopener noreffer">Change root</a> 到新安装的系统，自此，我们运行的命令就全部在新的系统而非U盘里的临时系统中运行了：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">arch-chroot /mnt
</code></pre></td></tr></table>
</div>
</div><h3 id="配置时区">配置时区</h3>
<p>使用以下命令将时区设置为东八区并生成<code>/etc/adjtime</code>文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc
</code></pre></td></tr></table>
</div>
</div><h3 id="本地化">本地化</h3>
<p>首先编辑<code>/etc/locale.gen</code>文件，这个文件中应该只有注释，我们需要把要使用的语言反注释（即去掉最前面的<code>#</code>），建议只选择带有 UTF-8 的语言，比如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">nano /etc/locale.gen
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">en_US.UTF-8 UTF-8
zh_CN.UTF-8 UTF-8
zh_TW.UTF-8 UTF-8
</code></pre></td></tr></table>
</div>
</div><p>设置完成后，执行<code>locale-gen</code>生成 locale 信息。</p>
<p>之后，我们需要编辑<code>/etc/locale.conf</code>来设置系统的默认语言。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">/etc/locale.conf
</code></pre></td></tr></table>
</div>
</div><p>然后输入以下内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">LANG=en_US.UTF-8
</code></pre></td></tr></table>
</div>
</div><div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>信息<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><h4 id="注意">注意</h4>
<p>不建议在这里直接设置为<code>zh_CN.UTF-8</code> ，会造成 TTY 乱码以及一些log文件输出错误。</div>
        </div>
    </div>
<h3 id="设置主机名">设置主机名</h3>
<p>编辑<code>/etc/hostname</code>并在里面输入你的主机名。</p>
<p>然后编辑<code>/etc/hosts</code>，输入以下内容（将myhostname替换为你的主机名）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">127.0.0.1	localhost
::1			localhost
127.0.1.1	myhostname.localdomain	myhostname
</code></pre></td></tr></table>
</div>
</div><h3 id="设置root密码">设置Root密码</h3>
<p>为了安全，我们需要为<code>root</code>账户设定一个密码，直接输入以下命令，并输入两次<strong>不可见的</strong>密码，就设置好了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">passwd
</code></pre></td></tr></table>
</div>
</div><h3 id="安装引导程序">安装引导程序</h3>
<p>只有一个系统是无法直接启动的，我们需要安装一个引导程序来启动我们的系统。对于 Linux 最流行的是 Grub2 。</p>
<h4 id="识别其他系统">识别其他系统</h4>
<p>也许你的电脑中并不是只有 Arch 一个系统，那么我们应该让 Grub2 也能够管理其他系统，我们只需要先安装以下两个包就可以识别已经存在的系统了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pacman -S os-prober ntfs-3g
</code></pre></td></tr></table>
</div>
</div><h4 id="biosmbr">BIOS/MBR</h4>
<p>依次执行以下的命令，来安装 Grub2 启动管理器：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pacman -S grub
grub-install --target<span class="o">=</span>i386-pc /dev/sdx
grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></td></tr></table>
</div>
</div><p>注意：其中的<code>sdx</code>应该是你的<code>/</code>（根目录）所在硬盘（不是分区，是硬盘！）。</p>
<h4 id="efigpt">EFI/GPT</h4>
<p>依次执行以下的命令，来安装 Grub2 启动管理器：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pacman -S grub efibootmgr
grub-install --target<span class="o">=</span>x86_64-efi --efi-directory<span class="o">=</span>/boot --bootloader-id<span class="o">=</span>grub
grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></td></tr></table>
</div>
</div><h4 id="检查">检查</h4>
<p>为了确保万无一失，我们最好检查以下 Grub 配置是否正确。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">nano /boot/grub/grub.cfg
</code></pre></td></tr></table>
</div>
</div><p>检查是否正确配置了 Arch 启动项以及是否识别到了其他系统。</p>
<h3 id="提前安装其他必要软件">提前安装其他必要软件</h3>
<p>在正式进入系统开始配置之前，我们也可以先安装一些必要的软件。</p>
<p>输入以下命令， pacman 会自动帮你处理好依赖等问题并完成安装。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pacman -S nano vim dialog wpa_supplicant ntfs-3g networkmanager
</code></pre></td></tr></table>
</div>
</div><p>如果你是 Intel CPU 建议额外安装<code>intel-ucode</code>来安装 Intel 微代码固件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pacman -S intel-ucode
</code></pre></td></tr></table>
</div>
</div><h3 id="重启进入系统">重启进入系统</h3>
<p>至此， Arch Linux 的基本安装和配置就完成了，我们可以重启进入安装好的系统来进行进一步的配置。</p>
<p>首先，退出 Chroot 环境执，行如下命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">exit</span>
</code></pre></td></tr></table>
</div>
</div><p>依次卸载硬盘分区：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">umount /mnt/home
umount /mnt
</code></pre></td></tr></table>
</div>
</div><p>最后重启并在关机后拔掉U盘。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">reboot
</code></pre></td></tr></table>
</div>
</div><h2 id="安装后的配置">安装后的配置</h2>
<h3 id="创建交换文件">创建交换文件</h3>
<p>对于现代的操作系统来说，交换文件是一种非常常见的设计，它将在物理内存不足时将部分硬盘空间模拟为内存，避免系统停止工作。在 Linux 中之前常见的做法是划分一个单独的分区作为交换分区，而目前更为便捷的做法是像 Windows 一样创建一个交换文件，方便之后的管理和调整。</p>
<p>首先分配一块空间用于交换文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">fallocate -l 512M /swapfile
</code></pre></td></tr></table>
</div>
</div><p>推荐至少要有 4G 大小。</p>
<p>更改权限：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">chmod <span class="m">600</span> /swapfile
</code></pre></td></tr></table>
</div>
</div><p>设置交换文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mkswap /swapfile
</code></pre></td></tr></table>
</div>
</div><p>启用交换文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">swapon /swapfile
</code></pre></td></tr></table>
</div>
</div><p>最后编辑<code>/etc/fstab</code>在开机时挂载交换文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">nano /etc/fstab
</code></pre></td></tr></table>
</div>
</div><p>在最底部添加：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">/swapfile none swap defaults 0 0
</code></pre></td></tr></table>
</div>
</div><h3 id="新建用户">新建用户</h3>
<p>直接使用<code>root</code>账户作为默认账户是很不安全的，没准手一抖输入了个<code>rm -rf /</code>就和全部数据说拜拜了。并且很多软件都是禁止在<code>root</code>环境下执行的，比如安装 AUR 源中的软件时必须的<code>makepkg</code>命令。所以我们要创建一个低权限账户作为日常使用的账户。使用以下命令创建一个账户：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">useradd -m -G wheel username
</code></pre></td></tr></table>
</div>
</div><p>上面的命令表示创建一个名为 username 的账户，加入 wheel 用户组，并为其创建一个用户主目录<code>/home/username</code> 。</p>
<p>之后执行以下命令设置密码。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">passwd username
</code></pre></td></tr></table>
</div>
</div><h3 id="配置sudo">配置sudo</h3>
<p>如果我们要在低权限账户中执行一些特权操作，该怎么办呢，很简单，直接输入<code>su</code>命令即可切换到<code>root</code>账户，执行完后再输入<code>exit</code>即可返回，但是这样多少有些麻烦，我们可以用<code>sudo</code>命令来简化这一步骤。</p>
<p>首先安装<code>sudo</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pacman -S sudo
</code></pre></td></tr></table>
</div>
</div><p>然后为了配置<code>sudo </code>，需要先设置一个默认编辑器，比如 nano 或者 vim：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">export</span> <span class="nv">EDITOR</span><span class="o">=</span>nano
<span class="nb">export</span> <span class="nv">EDITOR</span><span class="o">=</span>vim
</code></pre></td></tr></table>
</div>
</div><p>然后执行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">visudo
</code></pre></td></tr></table>
</div>
</div><p>找到<code># %wheel ALL=(ALL)ALL</code>这行，并反注释掉。</p>
<p>这表示允许wheel用户组的全部用户使用<code>sudo</code>执行一切命令，当然，需要输入密码。</p>
<h3 id="安装图像界面">安装图像界面</h3>
<h4 id="安装显卡驱动">安装显卡驱动</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="GPU.png"
        data-srcset="/arch-install/GPU.png, GPU.png 1.5x, /arch-install/GPU.png 2x"
        data-sizes="auto"
        alt="/arch-install/GPU.png"
        title="GPU.png" /></p>
<p>你可以参照上表安装适合的显卡驱动，比如 Intel 的集成显卡就要安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S xf86-video-intel
</code></pre></td></tr></table>
</div>
</div><h4 id="安装xorg">安装Xorg</h4>
<p>X.Org项目提供了X Window系统的开源实现，是几乎一切桌面用户程序的必备条件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S xorg
</code></pre></td></tr></table>
</div>
</div><h4 id="安装桌面环境">安装桌面环境</h4>
<p>Linux 不像 Windows 或者 MacOS ，它拥有无数不同的桌面环境，这些桌面环境各有特点，从只有窗口管理器的 i3wm 和 Openbox ，到轻量级的 Xfce 、LXDE 和 LXQt、国人开发的 Deepin Desktop Environment ，再到最知名的 GNOME 和 KED ，可以说是数不胜数。其中我最喜欢的是 KED(Plasma)，它几乎不需要怎么配置就有着非常棒的显示效果，可定制项多，自带的工具也非常的齐全方便。所以接下来就以它为例。</p>
<p>准确来说 KED 并不是一个桌面环境，而是一个由 Plasma 桌面环境、库、框架 (KDE Frameworks)和应用组成的软件项目，包含了大量应用程序。其中桌面环境叫做 Plasma ，而其他应用程序可以在 <a href="https://www.archlinux.org/groups/x86_64/kde-applications/" target="_blank" rel="noopener noreffer">kde-applications</a> 包组中找到。</p>
<p>你可以直接执行以下命令来安装它们全部：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S plasma kde-applications
</code></pre></td></tr></table>
</div>
</div><p>不过我觉得这有点太重了，kde-applications 中有不少软件我是用不上的。所以我选择了只安装 plasma ，再手动安装其他需要的软件。我安装的程序主要如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo pacman -S plasma ark dolphin gwenview kdf konsole spectacle yakuake
</code></pre></td></tr></table>
</div>
</div><p>它们依次是桌面环境、压缩包管理器、文件管理器、图像查看器、磁盘空间查看器、终端模拟器、截图工具、下拉式终端。</p>
<h4 id="安装显示管理器">安装显示管理器</h4>
<p>显示管理器可以帮助我们不需要每次手动启动桌面环境，图形化完成登录等操作。最常用的显示管理器是 SDDM（也是KED的默认显示管理器）。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S sddm
</code></pre></td></tr></table>
</div>
</div><p>安装完成后我们需要让它开机自动启动：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo systemctl <span class="nb">enable</span> sddm
</code></pre></td></tr></table>
</div>
</div><h4 id="重启进入图形化界面">重启进入图形化界面</h4>
<p>最后我们只要运行<code>reboot</code>重启即可进入图形化界面了！</p>
<h2 id="开始使用">开始使用</h2>
<h3 id="配置-pacman">配置 pacman</h3>
<p>pacman 是 Arch 默认的包管理器，它有许多可自定义的选项，可以通过编辑<code>/etc/pacman.conf</code>进行修改，我进行的配置如下：</p>
<ul>
<li>启用彩色输出：反注释<code>Color</code></li>
<li>升级前对比版本：反注释<code>VerbosePkgLists</code></li>
</ul>
<h3 id="使用-archlinuxcn">使用 ArchlinuxCN</h3>
<p>Arch Linux 中文社区仓库 是由 Arch Linux 中文社区驱动的非官方用户仓库。包含中文用户常用软件、工具、字体/美化包等。我们可以通过编辑 <code>/etc/pacman.conf</code> 来添加它。</p>
<p>在 <code>/etc/pacman.conf</code> 文件末尾添加以下两行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[archlinuxcn]
Server = https://repo.archlinuxcn.org/$arch
</code></pre></td></tr></table>
</div>
</div><p>或者也可以使用清华大学开源软件镜像站提供的镜像：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[archlinuxcn]
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
</code></pre></td></tr></table>
</div>
</div><p>之后安装 <code>archlinuxcn-keyring</code> 包导入 GPG key。</p>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>提示<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>如果安装 <code>archlinuxcn-keyring </code> 失败的话可以在<code>/etc/pacman.conf</code>最后面添加：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">SigLevel = Optional TrustAll
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<h3 id="使用-aur">使用 AUR</h3>
<p><a href="https://aur.archlinux.org/" target="_blank" rel="noopener noreffer">Arch 用户软件仓库</a>（Arch User Repository，AUR）是为用户而建、由用户主导的 Arch 软件仓库。提供了大量官方包之外的软件包，可以说它是 Arch 的灵魂之一，几乎所有 Linux 上有的软件都可以在它里面找到。</p>
<p>要安装 AUR 中的软件，基本操作是在 <a href="https://aur.archlinux.org/" target="_blank" rel="noopener noreffer">AUR</a> 中搜索软件，然后使用<code>git</code>克隆源码，再使用<code>makepkg</code>生成安装包，最后使用<code>pacman -U xxx.tar.gz</code>安装包。这显然是很麻烦的，所以我们可以使用一些 AUR 助手（AUR helpers）来帮助我们安装，目前最为常用的是 yay 。</p>
<p>如果你添加了 ArchlinuxCN 源的话可以直接安装 yay 。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S yay
</code></pre></td></tr></table>
</div>
</div><p>否则需要手动安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">git clone https://aur.archlinux.org/yay-bin.git
<span class="nb">cd</span> yay
makepkg -si
</code></pre></td></tr></table>
</div>
</div><p><code>yay</code> 兼容所有 <code>pacman</code> 的命令行，你可以直接像使用<code>pacman</code>一样使用它。</p>
<p>如果 AUR 源访问较慢，也可以使用以下命令切换到清华大学开源软件镜像站提供的镜像源。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yay --aururl <span class="s2">&#34;https://aur.tuna.tsinghua.edu.cn&#34;</span> --save
</code></pre></td></tr></table>
</div>
</div><h3 id="安装中文字体">安装中文字体</h3>
<p>中文字体有很多种，常用的有文泉驿的开源字体和 Google 的 noto 字体，我使用的是noto 字体。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji
</code></pre></td></tr></table>
</div>
</div><p>如果你在安装后发现部分界面字形为异体（日文）字形，可以参考 <a href="https://wiki.archlinux.org/index.php/Localization/Simplified_Chinese_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#%E4%BF%AE%E6%AD%A3%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E4%B8%BA%E5%BC%82%E4%BD%93%EF%BC%88%E6%97%A5%E6%96%87%EF%BC%89%E5%AD%97%E5%BD%A2" target="_blank" rel="noopener noreffer">修正简体中文显示为异体（日文）字形</a>。</p>
<h3 id="安装中文输入法">安装中文输入法</h3>
<p>中文输入法可以直接使用搜狗输入法。</p>
<p>如果添加了 ArchlinuxCN 源的话可以直接执行以下命令安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S fcitx-lilydjwg-git fcitx-sogoupinyin fcitx-qt5
</code></pre></td></tr></table>
</div>
</div><p>如果是KDE桌面环境的话还应该安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S kcm-fcitx
</code></pre></td></tr></table>
</div>
</div><p>安装完成后需要修改<code>/etc/profile</code>文件，在文件开头添加：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">export XMODIFIERS=&#34;@im=fcitx&#34;
export GTK_IM_MODULE=&#34;fcitx&#34;
export QT_IM_MODULE=&#34;fcitx&#34;
</code></pre></td></tr></table>
</div>
</div><h2 id="软件推荐">软件推荐</h2>
<p>最后再来推荐一些我常用的软件吧。</p>
<h3 id="zsh">Zsh</h3>
<p>Bash 的替代者，支持丰富的插件和主题，可以说是最好的 Shell 之一。</p>
<p>配合 Oh My Zsh 和 Powerlevel10k 主题简直好用到飞起！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo pacman -S zsh oh-my-zsh-git zsh-autosuggestions zsh-syntax-highlighting zsh-theme-powerlevel10k
</code></pre></td></tr></table>
</div>
</div><p>我常用的的插件如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">plugins=(git sudo sublime colored-man-pages pip command-not-found safe-paste extract z wd archlinux zsh-autosuggestions zsh-syntax-highlighting)
</code></pre></td></tr></table>
</div>
</div><h3 id="办公">办公</h3>
<ul>
<li>Markdown 编辑器：Typora</li>
<li>Office：WPS</li>
<li>思维导图：XMind Zen</li>
<li>笔记：Leanote</li>
</ul>
<h3 id="互联网">互联网</h3>
<ul>
<li>浏览器：Chrome</li>
<li>浏览器：FireFox</li>
<li>下载：uGet</li>
<li>下载：Aria2</li>
<li>比特币钱包：Electron</li>
<li>网络抓包：Wireshark</li>
<li>云盘：坚果云</li>
</ul>
<h3 id="影音图像">影音图像</h3>
<ul>
<li>图像处理：GIMP</li>
<li>视频播放器：VLC</li>
</ul>
<h3 id="文字编辑">文字编辑</h3>
<ul>
<li>Sublime Text</li>
<li>Atom</li>
<li>Visual Studio Code</li>
</ul>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Installation_guide_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Linux Wiki Installation guide</a></li>
<li><a href="https://wiki.archlinux.org/index.php/General_recommendations_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Linux Wiki General recommendations</a></li>
<li><a href="https://www.viseator.com/2017/05/17/arch_install/" target="_blank" rel="noopener noreffer">以官方Wiki的方式安装ArchLinux</a></li>
<li><a href="https://www.viseator.com/2017/05/19/arch_setup/" target="_blank" rel="noopener noreffer">ArchLinux安装后的必须配置与图形界面安装教程</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/74931620" target="_blank" rel="noopener noreffer">Arch Linux上搜狗输入法无法输入的解决方法</a></li>
</ul></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2020-04-08</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/arch-install/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://st1020.top/arch-install/" data-title="Arch Linux 安装记录" data-hashtags="Linux,Arch"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://st1020.top/arch-install/" data-hashtag="Linux"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 WhatsApp" data-sharer="whatsapp" data-url="https://st1020.top/arch-install/" data-title="Arch Linux 安装记录" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://st1020.top/arch-install/" data-title="Arch Linux 安装记录"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://st1020.top/arch-install/" data-title="Arch Linux 安装记录"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Evernote" data-sharer="evernote" data-url="https://st1020.top/arch-install/" data-title="Arch Linux 安装记录"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/linux/">Linux</a>,&nbsp;<a href="/tags/arch/">Arch</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/hello-world/" class="prev" rel="prev" title="Hello World"><i class="fas fa-angle-left fa-fw"></i>Hello World</a>
            <a href="/hexo-next-theme-customization/" class="next" rel="next" title="Hexo-NexT 主题个性化定制">Hexo-NexT 主题个性化定制<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://st1020.top/" target="_blank">st1020</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank">CC BY-SA 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="/lib/gitalk/gitalk.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":15},"comment":{"gitalk":{"admin":["st1020"],"clientID":"eb330b23717cd7555155","clientSecret":"e8b919f17c3d0a42853584eb95866e28779d3426","id":"2020-04-08T11:22:14+08:00","owner":"st1020","repo":"BlogComment","title":"Arch Linux 安装记录"}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
